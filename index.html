<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Calculadora de Integralização</title>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap');

    :root{
        /* Paleta criativa: Coral vibrante + Azul oceano + Ouro */
        --primary: #ff6b5b;           /* Coral vibrante */
        --primary-light: #ff8a7a;     /* Coral claro */
        --primary-dark: #e85a4a;      /* Coral escuro */
        --secondary: #0ea5e9;         /* Azul oceano */
        --secondary-light: #38bdf8;   /* Azul claro */
        --accent: #fbbf24;            /* Ouro/Âmbar quente */
        --success: #0ea5e9;           /* Azul sucesso */
        --warning: #fbbf24;           /* Ouro aviso */
        --error: #ff6b5b;             /* Coral erro */
        
        /* Backgrounds e superfícies */
        --bg-primary: #ffffff;        /* Branco puro */
        --bg-secondary: #f8fafc;      /* Cinza azulado muito claro */
        --bg-tertiary: #f1f5f9;       /* Cinza azulado claro */
        
        /* Textos */
        --text-primary: #0f172a;      /* Azul muito escuro */
        --text-secondary: #475569;    /* Cinza azulado médio */
        --text-tertiary: #94a3b8;     /* Cinza azulado claro */
        
        /* Borders */
        --border: #e2e8f0;            /* Cinza azulado borda */
        --border-light: #f1f5f9;      /* Cinza azulado borda clara */
        
        /* Sombras */
        --shadow-sm: 0 1px 2px 0 rgba(15, 23, 42, 0.05);
        --shadow-md: 0 4px 6px -1px rgba(15, 23, 42, 0.1), 0 2px 4px -1px rgba(15, 23, 42, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -2px rgba(15, 23, 42, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(15, 23, 42, 0.1), 0 10px 10px -5px rgba(15, 23, 42, 0.04);
        
        --radius: 12px;
        --radius-lg: 16px;
        --radius-xl: 20px;
    }

    *{box-sizing:border-box}
    
    body{
        font-family: 'Inter', sans-serif;
        margin:0;
        min-height:100vh;
        background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
        display:flex;
        align-items:center;
        justify-content:center;
        padding:24px;
        color:var(--text-primary);
    }

    .wrap{
        width:100%;
        max-width:1000px;
        display:grid;
        grid-template-columns: 1fr 380px;
        gap:32px;
    }

    /* Card principal */
    .card {
        background: var(--bg-primary);
        border-radius: var(--radius-lg);
        padding:40px;
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--border);
        transition: all 0.3s ease;
    }

    .card:hover {
        box-shadow: var(--shadow-xl);
        transform: translateY(-2px);
    }

    /* Lado direito com resumo / resultado */
    .aside {
        background: var(--bg-primary);
        border-radius: var(--radius-lg);
        padding:28px;
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--border);
        display:flex;
        flex-direction:column;
        gap:20px;
        align-items:stretch;
        transition: all 0.3s ease;
    }

    .aside:hover {
        box-shadow: var(--shadow-xl);
        transform: translateY(-2px);
    }

    .title {
        text-align:center;
        font-size:28px;
        font-weight:700;
        font-family: 'Poppins', sans-serif;
        color:white;
        background: linear-gradient(135deg, #ff6b5b 0%, #fbbf24 100%);
        display:inline-block;
        padding:14px 28px;
        border-radius:var(--radius-lg);
        margin-bottom:8px;
        box-shadow: 0 8px 20px rgba(255, 107, 91, 0.3);
    }

    .header-row{
        display:flex;
        gap:14px;
        align-items:center;
        justify-content:space-between;
    }

    label{
        display:block;
        font-size:12px;
        color:var(--text-secondary);
        margin-bottom:8px;
        font-weight:600;
        text-transform:uppercase;
        letter-spacing:0.5px;
    }

    .grid{
        display:grid;
        grid-template-columns: repeat(2, 1fr);
        gap:20px;
    }

    .full {
        grid-column: 1 / -1;
    }

    select, input[type="number"]{
        width:100%;
        padding:12px 14px;
        border-radius:var(--radius);
        background: var(--bg-secondary);
        border: 2px solid var(--border);
        color:var(--text-primary);
        font-size:14px;
        font-family: 'Inter', sans-serif;
        outline:none;
        transition: all 0.2s ease;
    }

    select:hover, input[type="number"]:hover {
        border-color: var(--secondary-light);
        background: var(--bg-tertiary);
    }

    select:focus, input[type="number"]:focus{
        box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        border-color: var(--secondary);
        background: var(--bg-primary);
    }

    .controls {
        display:flex;
        gap:12px;
        justify-content:flex-end;
        margin-top:8px;
    }

    button {
        border: none;
        padding:11px 18px;
        border-radius:var(--radius);
        cursor:pointer;
        font-weight:600;
        letter-spacing:0.3px;
        font-size:13px;
        font-family: 'Inter', sans-serif;
        transition: all 0.2s ease;
        text-transform: uppercase;
    }

    .btn-calc {
        background: linear-gradient(135deg, #ff6b5b 0%, #ff8a7a 100%);
        color:white;
        box-shadow: 0 4px 15px rgba(255, 107, 91, 0.3);
    }

    .btn-calc:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 107, 91, 0.4);
    }

    .btn-calc:active {
        transform: translateY(0);
    }

    .btn-reset {
        background: var(--bg-secondary);
        color:var(--text-secondary);
        border:2px solid var(--border);
    }

    .btn-reset:hover { 
        color:var(--text-primary);
        background: var(--bg-tertiary);
        border-color: var(--secondary-light);
    }

    .result-card{
        width:100%;
        padding:24px;
        border-radius:var(--radius-lg);
        background: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 100%);
        display:flex;
        flex-direction:column;
        gap:12px;
        align-items:center;
        border: none;
        color: white;
        box-shadow: 0 8px 20px rgba(14, 165, 233, 0.3);
    }

    .result-title{
        font-size:12px;
        color:rgba(255, 255, 255, 0.85);
        text-transform:uppercase;
        letter-spacing:0.5px;
        font-weight:600;
    }

    .result-value{
        font-weight:800;
        font-size:32px;
        color:white;
        font-family: 'Poppins', sans-serif;
    }

    .meta {
        width:100%;
        display:flex;
        justify-content:space-between;
        gap:12px;
        margin-top:4px;
    }

    .meta .box{
        flex:1;
        padding:12px;
        border-radius:var(--radius);
        text-align:center;
        background: rgba(255, 255, 255, 0.15);
        border:1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
    }

    .meta .box .small {
        font-size: 11px;
        color: rgba(255, 255, 255, 0.75);
        text-transform: uppercase;
        letter-spacing: 0.3px;
        font-weight: 600;
    }

    .meta .box .num {
        font-weight:700;
        font-size:18px;
        color:white;
        margin-top: 4px;
    }

    .notes{
        font-size:13px;
        color:var(--text-secondary);
        line-height:1.5;
    }

    footer{
        grid-column: 1 / -1;
        text-align:center;
        color:var(--text-tertiary);
        font-size:12px;
        margin-top:12px;
    }

    /* Botão de cópia estilizado */
    #btnCopy {
        width:100%;
        padding:12px 16px;
        border-radius:var(--radius-lg);
        border:none;
        cursor:pointer;
        font-weight:700;
        background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
        color:#0f172a;
        font-size:13px;
        text-transform: uppercase;
        letter-spacing: 0.3px;
        box-shadow: 0 4px 15px rgba(251, 191, 36, 0.3);
        transition: all 0.2s ease;
        font-family: 'Inter', sans-serif;
    }

    #btnCopy:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(251, 191, 36, 0.4);
    }

    #btnCopy:active {
        transform: translateY(0);
    }

    @media(max-width:980px){
        .wrap{ 
            grid-template-columns: 1fr; 
        }
        .grid{ 
            grid-template-columns: 1fr; 
        }
        .aside{ 
            order: -1; 
        }
        .card {
            padding: 28px;
        }
        .title {
            font-size: 24px;
            padding: 12px 24px;
        }
    }

    @media(max-width:640px){
        body {
            padding: 16px;
        }
        .wrap {
            gap: 20px;
        }
        .card {
            padding: 20px;
        }
        .aside {
            padding: 20px;
        }
        .grid {
            gap: 16px;
        }
        .title {
            font-size: 20px;
            padding: 10px 20px;
        }
    }
</style>
</head>
<body>
    <div class="wrap">
        <div class="card" role="main" aria-label="Calculadora de integralização">
            <div style="display:flex; justify-content:center;">
                <div class="title">Calculadora de Integralização</div>
            </div>

            <div style="margin-top:20px" class="grid">
                <!-- Semestre de ingresso (lista 2003/01 ... 2035/02) -->
                <div class="full">
                    <label for="anoSemestreInicio">Ano / Semestre de Ingresso</label>
                    <select id="anoSemestreInicio" aria-label="Ano e semestre de ingresso"></select>
                </div>

                <div>
                    <label for="qtdSemestre">Qtd. de semestres do curso</label>
                    <input id="qtdSemestre" type="number" min="1" value="5" />
                </div>

                <div>
                    <label for="qtdTrancamentos">Qtd. de trancamentos (em semestres)</label>
                    <input id="qtdTrancamentos" type="number" min="0" value="0" />
                </div>

                <div class="full" style="margin-top:8px;">
                    <div class="controls" style="justify-content:flex-start;">
                        <button id="btnReset" class="btn-reset" type="button" title="Resetar">Reset</button>
                        <div style="flex:1"></div>
                        <button id="btnCalcular" class="btn-calc" type="button">Calcular</button>
                    </div>
                </div>

                <div class="full notes">
                 
                </div>
            </div>

            <footer>© 2025 - Análise Curricular - Equipe de análise 2025 </footer>
        </div>

        <aside class="aside" aria-label="Resumo">
            <div class="result-card">
                <div class="result-title">Período máximo de integralização (até)</div>
                <div id="resultadoIntegralizacao" class="result-value">— / —</div>

                <div class="meta" style="margin-top:4px;">
                    <div class="box">
                        <div class="small">Semestres máximos</div>
                        <div id="semestresMax" class="num">—</div>
                    </div>
                    <div class="box">
                        <div class="small">Trancamentos</div>
                        <div id="trancamentosShow" class="num">0</div>
                    </div>
                </div>
            </div>

            <div style="width:100%; text-align:center;">
                <button id="btnCopy">Copiar resultado</button>
            </div>

            <div style="width:100%;" class="notes">
                <div>
            </div>
        </aside>
    </div>

<script>
    // popula select com semestres de 2003/01 até 2035/02
    (function popularSemestres(){
        const select = document.getElementById('anoSemestreInicio');
        for (let ano = 2003; ano <= 2035; ano++){
            const op1 = document.createElement('option');
            op1.value = `${ano}-01`;
            op1.textContent = `${ano}/01`;
            select.appendChild(op1);

            const op2 = document.createElement('option');
            op2.value = `${ano}-02`;
            op2.textContent = `${ano}/02`;
            select.appendChild(op2);
        }

        // padrão: semestre atual
        const now = new Date();
        const mes = now.getMonth() + 1;
        const semestreAtual = mes <= 6 ? '01' : '02';
        const defaultVal = `${now.getFullYear()}-${semestreAtual}`;

        // se o ano atual estiver fora do range (ex: >2035), usa 2035/02
        const values = Array.from(select.options).map(o => o.value);
        select.value = values.includes(defaultVal) ? defaultVal : values[values.length - 1];
    })();

    // elementos
    const anoSemestreInicioSelect = document.getElementById('anoSemestreInicio');
    const qtdSemestreInput = document.getElementById('qtdSemestre');
    const qtdTrancamentosInput = document.getElementById('qtdTrancamentos');
    const resultadoIntegralizacaoSpan = document.getElementById('resultadoIntegralizacao');
    const semestresMaxEl = document.getElementById('semestresMax');
    const trancamentosShowEl = document.getElementById('trancamentosShow');
    const btnCalcular = document.getElementById('btnCalcular');
    const btnReset = document.getElementById('btnReset');
    const btnCopy = document.getElementById('btnCopy');

    function calcularIntegralizacao(){
        const val = anoSemestreInicioSelect.value;
        if (!val) return;
        const [anoInicioStr, semestreInicioStr] = val.split('-');
        let anoInicio = parseInt(anoInicioStr, 10);
        let semestreInicio = parseInt(semestreInicioStr, 10); // 1 ou 2

        const qtdSemestresCurso = Math.max(1, parseInt(qtdSemestreInput.value, 10) || 1);
        const qtdTrancamentos = Math.max(0, parseInt(qtdTrancamentosInput.value, 10) || 0);

        // Regra principal
        const semestresMax = (qtdSemestresCurso * 2) - 2; // conforme regra fornecida
        let totalSemestresContados = semestresMax + qtdTrancamentos;
        if (totalSemestresContados < 1) totalSemestresContados = 1;

        // avançamos apenas (total - 1) transições porque o semestre inicial é contado como 1º
        let transicoes = totalSemestresContados - 1;

        let anoFinal = anoInicio;
        let semestreFinal = semestreInicio;

        for (let i = 0; i < transicoes; i++){
            if (semestreFinal === 1){
                semestreFinal = 2;
            } else {
                semestreFinal = 1;
                anoFinal++;
            }
        }

        // formatar como YYYY/SS
        const formatted = `${anoFinal}/${String(semestreFinal).padStart(2,'0')}`;
        resultadoIntegralizacaoSpan.textContent = formatted;
        semestresMaxEl.textContent = semestresMax;
        trancamentosShowEl.textContent = qtdTrancamentos;
    }

    // eventos
    btnCalcular.addEventListener('click', calcularIntegralizacao);

    // atualiza automaticamente ao mudar qualquer campo
    anoSemestreInicioSelect.addEventListener('change', calcularIntegralizacao);
    qtdSemestreInput.addEventListener('input', calcularIntegralizacao);
    qtdTrancamentosInput.addEventListener('input', calcularIntegralizacao);

    // reset funcional: volta aos padrões
    btnReset.addEventListener('click', function(){
        qtdSemestreInput.value = '5';
        qtdTrancamentosInput.value = '0';
        // semestre padrão atual (após popular)
        const now = new Date();
        const semestreAtual = (now.getMonth() + 1) <= 6 ? '01' : '02';
        const defaultVal = `${now.getFullYear()}-${semestreAtual}`;
        const options = Array.from(anoSemestreInicioSelect.options).map(o => o.value);
        anoSemestreInicioSelect.value = options.includes(defaultVal) ? defaultVal : options[options.length - 1];
        calcularIntegralizacao();
    });

    // copiar resultado para área de transferência
    btnCopy.addEventListener('click', function(){
        const texto = `Até: ${resultadoIntegralizacaoSpan.textContent} (Semestres máximos: ${semestresMaxEl.textContent}, Trancamentos: ${trancamentosShowEl.textContent})`;
        navigator.clipboard?.writeText(texto).then(() => {
            const originalText = btnCopy.textContent;
            btnCopy.textContent = 'Copiado!';
            setTimeout(()=> btnCopy.textContent = originalText, 1500);
        }).catch(()=> {
            alert('Não foi possível copiar automaticamente. Selecione e copie manualmente: ' + texto);
        });
    });

    // calcula ao carregar
    calcularIntegralizacao();
</script>
</body>
</html>

