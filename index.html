<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Calculadora de Integralização</title>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap');

    :root{
        --bg: #0f1724;        /* fundo geral */
        --card: #0b1220;      /* card escuro */
        --accent: #ff4d4f;    /* vermelho / destaque */
        --accent-2: #00c2a8;  /* verde água secundário */
        --muted: #98a0b3;
        --text: #e6eef6;
        --glass: rgba(255,255,255,0.03);
        --radius: 14px;
    }

    *{box-sizing:border-box}
    body{
        font-family: 'Montserrat', sans-serif;
        margin:0;
        min-height:100vh;
        background: linear-gradient(180deg, #071027 0%, #0f1224 100%);
        display:flex;
        align-items:center;
        justify-content:center;
        padding:28px;
        color:var(--text);
    }

    .wrap{
        width:100%;
        max-width:940px;
        display:grid;
        grid-template-columns: 1fr 380px;
        gap:28px;
    }

    /* Card principal */
    .card {
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        border-radius: var(--radius);
        padding:28px;
        box-shadow: 0 12px 30px rgba(2,6,23,0.6);
        border: 1px solid rgba(255,255,255,0.03);
    }

    /* Lado direito com resumo / resultado */
    .aside {
        background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));
        border-radius: var(--radius);
        padding:20px;
        box-shadow: 0 10px 24px rgba(2,6,23,0.6);
        border: 1px solid rgba(255,255,255,0.03);
        display:flex;
        flex-direction:column;
        gap:18px;
        align-items:center;
    }

    .title {
        text-align:center;
        font-size:24px;
        font-weight:700;
        color:var(--text);
        background: linear-gradient(90deg, rgba(255,255,255,0.98), rgba(255,255,255,0.98));
        display:inline-block;
        color: var(--card);
        padding:10px 22px;
        border-radius:10px;
        margin-bottom:12px;
    }

    .header-row{
        display:flex;
        gap:14px;
        align-items:center;
        justify-content:space-between;
    }

    label{
        display:block;
        font-size:13px;
        color:var(--muted);
        margin-bottom:8px;
        font-weight:600;
        text-transform:uppercase;
        letter-spacing:0.6px;
    }

    .grid{
        display:grid;
        grid-template-columns: repeat(2, 1fr);
        gap:14px;
    }

    .full {
        grid-column: 1 / -1;
    }

    select, input[type="number"]{
        width:100%;
        padding:12px 14px;
        border-radius:10px;
        background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.015));
        border: 1px solid rgba(255,255,255,0.04);
        color:var(--text);
        font-size:15px;
        outline:none;
    }

    select:focus, input[type="number"]:focus{
        box-shadow: 0 8px 20px rgba(0,0,0,0.6), 0 0 0 6px rgba(255,77,79,0.06);
        border-color: rgba(255,77,79,0.9);
    }

    .controls {
        display:flex;
        gap:12px;
        justify-content:flex-end;
        margin-top:8px;
    }

    button {
        border: none;
        padding:10px 14px;
        border-radius:10px;
        cursor:pointer;
        font-weight:700;
        letter-spacing:0.6px;
        font-size:14px;
    }

    .btn-calc {
        background: linear-gradient(90deg, var(--accent), #ff6b6b);
        color:white;
        box-shadow: 0 8px 20px rgba(255,77,79,0.12);
    }

    .btn-reset {
        background: linear-gradient(90deg, #182533, #101826);
        color:var(--muted);
        border:1px solid rgba(255,255,255,0.03);
    }

    .btn-reset:hover { color:var(--text) }

    .result-card{
        width:100%;
        padding:18px;
        border-radius:10px;
        background: linear-gradient(180deg, rgba(0,0,0,0.12), rgba(255,255,255,0.02));
        display:flex;
        flex-direction:column;
        gap:8px;
        align-items:center;
        border: 1px solid rgba(255,255,255,0.03);
    }

    .result-title{
        font-size:13px;
        color:var(--muted);
        text-transform:uppercase;
        letter-spacing:0.6px;
    }

    .result-value{
        font-weight:800;
        font-size:28px;
        color:var(--accent);
    }

    .meta {
        width:100%;
        display:flex;
        justify-content:space-between;
        gap:8px;
    }

    .meta .box{
        flex:1;
        padding:10px;
        border-radius:8px;
        text-align:center;
        background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.015));
        border:1px solid rgba(255,255,255,0.02);
    }

    .meta .box .num {
        font-weight:700;
        font-size:16px;
        color:var(--accent-2);
    }

    .notes{
        font-size:13px;
        color:var(--muted);
        line-height:1.45;
    }

    footer{
        grid-column: 1 / -1;
        text-align:center;
        color:var(--muted);
        font-size:13px;
        margin-top:8px;
    }

    @media(max-width:980px){
        .wrap{ grid-template-columns: 1fr; }
        .grid{ grid-template-columns: 1fr; }
        .aside{ order: -1; }
    }
</style>
</head>
<body>
    <div class="wrap">
        <div class="card" role="main" aria-label="Calculadora de integralização">
            <div style="display:flex; justify-content:center;">
                <div class="title">Calculadora para Integralização</div>
            </div>

            <div style="margin-top:12px" class="grid">
                <!-- Semestre de ingresso (lista 2003/01 ... 2035/02) -->
                <div class="full">
                    <label for="anoSemestreInicio">Ano / Semestre de Ingresso</label>
                    <select id="anoSemestreInicio" aria-label="Ano e semestre de ingresso"></select>
                </div>

                <div>
                    <label for="qtdSemestre">Qtd. de semestres do curso</label>
                    <input id="qtdSemestre" type="number" min="1" value="5" />
                </div>

                <div>
                    <label for="qtdTrancamentos">Qtd. de trancamentos (em semestres)</label>
                    <input id="qtdTrancamentos" type="number" min="0" value="0" />
                </div>

                <div class="full" style="margin-top:6px;">
                    <div class="controls" style="justify-content:flex-start;">
                        <button id="btnReset" class="btn-reset" type="button" title="Resetar">Reset</button>
                        <div style="flex:1"></div>
                        <button id="btnCalcular" class="btn-calc" type="button">Calcular</button>
                    </div>
                </div>

                <div class="full notes">
                    <strong>Regra:</strong> período máximo = (duração em semestres × 2) − 2, contado a partir do semestre de ingresso (o semestre de ingresso é contado como o 1º). Ex.: curso 5 semestres → máximo 8 semestres; ingresso 2024/01 → até 2027/02.
                </div>
            </div>

            <footer>© 2025 UNINOVE — Análise Curricular — Equipe de análise 2025 </footer>
        </div>

        <aside class="aside" aria-label="Resumo">
            <div class="result-card">
                <div class="result-title">Período máximo de integralização (até)</div>
                <div id="resultadoIntegralizacao" class="result-value">— / —</div>

                <div class="meta" style="margin-top:6px;">
                    <div class="box">
                        <div class="small">Semestres máximos</div>
                        <div id="semestresMax" class="num">—</div>
                    </div>
                    <div class="box">
                        <div class="small">Trancamentos</div>
                        <div id="trancamentosShow" class="num">0</div>
                    </div>
                </div>
            </div>

            <div style="width:100%; text-align:center; margin-top:12px;">
                <button id="btnCopy" style="padding:10px 14px; border-radius:10px; border:none; cursor:pointer; font-weight:700; background:linear-gradient(90deg,#00c2a8,#00b39e); color:#021017;">Copiar resultado</button>
            </div>

            <div style="width:100%; margin-top:12px;" class="notes">
                <div><strong>Observação:</strong> selecione o ano/semestre de ingresso (ex.: 2003/01). O cálculo conta o semestre de ingresso como o primeiro. Trancamentos são adicionados em semestres.</div>
            </div>
        </aside>
    </div>

<script>
    // popula select com semestres de 2003/01 até 2035/02
    (function popularSemestres(){
        const select = document.getElementById('anoSemestreInicio');
        for (let ano = 2003; ano <= 2035; ano++){
            const op1 = document.createElement('option');
            op1.value = `${ano}-01`;
            op1.textContent = `${ano}/01`;
            select.appendChild(op1);

            const op2 = document.createElement('option');
            op2.value = `${ano}-02`;
            op2.textContent = `${ano}/02`;
            select.appendChild(op2);
        }

        // padrão: semestre atual
        const now = new Date();
        const mes = now.getMonth() + 1;
        const semestreAtual = mes <= 6 ? '01' : '02';
        const defaultVal = `${now.getFullYear()}-${semestreAtual}`;

        // se o ano atual estiver fora do range (ex: >2035), usa 2035/02
        const values = Array.from(select.options).map(o => o.value);
        select.value = values.includes(defaultVal) ? defaultVal : values[values.length - 1];
    })();

    // elementos
    const anoSemestreInicioSelect = document.getElementById('anoSemestreInicio');
    const qtdSemestreInput = document.getElementById('qtdSemestre');
    const qtdTrancamentosInput = document.getElementById('qtdTrancamentos');
    const resultadoIntegralizacaoSpan = document.getElementById('resultadoIntegralizacao');
    const semestresMaxEl = document.getElementById('semestresMax');
    const trancamentosShowEl = document.getElementById('trancamentosShow');
    const btnCalcular = document.getElementById('btnCalcular');
    const btnReset = document.getElementById('btnReset');
    const btnCopy = document.getElementById('btnCopy');

    function calcularIntegralizacao(){
        const val = anoSemestreInicioSelect.value;
        if (!val) return;
        const [anoInicioStr, semestreInicioStr] = val.split('-');
        let anoInicio = parseInt(anoInicioStr, 10);
        let semestreInicio = parseInt(semestreInicioStr, 10); // 1 ou 2

        const qtdSemestresCurso = Math.max(1, parseInt(qtdSemestreInput.value, 10) || 1);
        const qtdTrancamentos = Math.max(0, parseInt(qtdTrancamentosInput.value, 10) || 0);

        // Regra principal
        const semestresMax = (qtdSemestresCurso * 2) - 2; // conforme regra fornecida
        let totalSemestresContados = semestresMax + qtdTrancamentos;
        if (totalSemestresContados < 1) totalSemestresContados = 1;

        // avançamos apenas (total - 1) transições porque o semestre inicial é contado como 1º
        let transicoes = totalSemestresContados - 1;

        let anoFinal = anoInicio;
        let semestreFinal = semestreInicio;

        for (let i = 0; i < transicoes; i++){
            if (semestreFinal === 1){
                semestreFinal = 2;
            } else {
                semestreFinal = 1;
                anoFinal++;
            }
        }

        // formatar como YYYY/SS
        const formatted = `${anoFinal}/${String(semestreFinal).padStart(2,'0')}`;
        resultadoIntegralizacaoSpan.textContent = formatted;
        semestresMaxEl.textContent = semestresMax;
        trancamentosShowEl.textContent = qtdTrancamentos;
    }

    // eventos
    btnCalcular.addEventListener('click', calcularIntegralizacao);

    // atualiza automaticamente ao mudar qualquer campo
    anoSemestreInicioSelect.addEventListener('change', calcularIntegralizacao);
    qtdSemestreInput.addEventListener('input', calcularIntegralizacao);
    qtdTrancamentosInput.addEventListener('input', calcularIntegralizacao);

    // reset funcional: volta aos padrões
    btnReset.addEventListener('click', function(){
        qtdSemestreInput.value = '5';
        qtdTrancamentosInput.value = '0';
        // semestre padrão atual (após popular)
        const now = new Date();
        const semestreAtual = (now.getMonth() + 1) <= 6 ? '01' : '02';
        const defaultVal = `${now.getFullYear()}-${semestreAtual}`;
        const options = Array.from(anoSemestreInicioSelect.options).map(o => o.value);
        anoSemestreInicioSelect.value = options.includes(defaultVal) ? defaultVal : options[options.length - 1];
        calcularIntegralizacao();
    });

    // copiar resultado para área de transferência
    btnCopy.addEventListener('click', function(){
        const texto = `Até: ${resultadoIntegralizacaoSpan.textContent} (Semestres máximos: ${semestresMaxEl.textContent}, Trancamentos: ${trancamentosShowEl.textContent})`;
        navigator.clipboard?.writeText(texto).then(() => {
            btnCopy.textContent = 'Copiado!';
            setTimeout(()=> btnCopy.textContent = 'Copiar resultado', 1500);
        }).catch(()=> {
            alert('Não foi possível copiar automaticamente. Selecione e copie manualmente: ' + texto);
        });
    });

    // calcula ao carregar
    calcularIntegralizacao();
</script>
</body>
</html>

